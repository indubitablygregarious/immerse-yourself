# 2026-02-13

Big day — probably too big, honestly. Started the morning by finalizing the open-core split: confirmed the free tier gets 20 environments plus a startup config, assigned all 86 environments across the premium packs, and pushed the free tier configs and sound collections to the public repo. Then I set up the desktop build CI — a three-platform GitHub Actions workflow for Linux, macOS, and Windows, with a release script and make targets to automate the whole process. That part went smoothly.

The evening session was where things got rough. I'd been using rodio for audio playback but kept hitting walls trying to match the behavior I had with ffplay — volume control on individual streams, proper looping, fade-outs, and being able to pause/resume without dropping audio. After fighting with rodio's API for a while I gave up and migrated everything to kira, which turned out to be a much better fit for what I needed. The atmosphere engine and sound engine both got substantially rewritten. Once kira was working, I tackled the non-blocking download system — environments with uncached freesound URLs now download in the background while the old environment keeps playing, then everything switches over atomically when the downloads finish. Had to add a generation counter to handle the case where you click a different environment while one is still downloading. Also fixed the startup environment to route through the same download-wait-switch path (it was bypassing it before, which meant atmosphere wouldn't actually play on fresh install until you re-clicked). Threw in dynamic category refresh so new sound categories appear in the sidebar without restarting, and fixed a bug where environment categories were showing spurious atmosphere badges. Long session, low energy by the end, but the app sounds noticeably better now.
