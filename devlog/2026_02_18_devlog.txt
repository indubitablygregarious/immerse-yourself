# 2026-02-18

Big iOS day. I started by tackling the bundle size problem — the freesound audio files were getting duplicated in the iOS app bundle, so I reworked the CI workflow to eliminate redundant copies under Assets/. That led to a cascade of fixes: the sound bundling path needed to use the Assets/ directory instead of modifying the pbxproj, and then the virtual loop configs couldn't see the bundled sounds because the manifest lookup wasn't checking the right paths on iOS. That was a meaty refactor in state.rs — about 150 lines changed to get the sound resolution pipeline working correctly with the read-only app bundle. I also fixed up the desktop build workflow while I was in CI-fixing mode (paths, icons, LFS handling). In the evening I tackled two user-facing iOS bugs: settings files (wizbulb, spotify, app settings) were trying to write to the read-only app bundle, so I added a settings_dir() helper that redirects to the writable user_content_dir on iOS. The lights engine had the same problem — it was loading bulb config from the bundle at startup and never reinitializing after save, so I fixed both the init path and added hot-reload so saving bulb config immediately spins up the lights engine. Lights now trigger from the iOS app, which makes it feel like a real companion to the desktop version. Five TestFlight builds today (0.3.20 through 0.3.24) to iterate on all of this.
